# ui/settings.kv
#:import MDRaisedButton kivymd.uix.button.MDRaisedButton
#:import dp kivy.metrics.dp

<SettingsScreen>:
    FloatLayout:

        # ── Main content area ────────────────────────────────────────
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 1
            size_hint_y: 1
            padding: dp(20), dp(60), dp(20), dp(20)
            spacing: dp(30)
            pos_hint: {'x': 0, 'y': 0}

            # Title
            Label:
                text: app.get_translations('Settings')
                font_size: '58sp'
                bold: True
                size_hint_y: None
                height: self.texture_size[1]
                halign: 'center'
                color: 0, 0, 0, 1

            ScrollView:
                do_scroll_x: False

                GridLayout:
                    cols: 1
                    size_hint_y: None
                    height: self.minimum_height
                    spacing: dp(20)
                    padding: dp(10)

                    MDRaisedButton:
                        text: app.get_translations('Change Username')
                        md_bg_color: 0.9, 0.5, 0.2, 1
                        size_hint_x: None
                        width: dp(630)
                        pos_hint: {'center_x': .5}
                        size_hint_y: None
                        height: dp(50)
                        on_release: root.show_username_dialog()

                    MDRaisedButton:
                        text: app.get_translations('Change Password')
                        md_bg_color: 0.9, 0.5, 0.2, 1
                        size_hint_x: None
                        width: dp(630)
                        pos_hint: {'center_x': .5}
                        size_hint_y: None
                        height: dp(50)
                        on_release: root.show_password_dialog()

                    MDRaisedButton:
                        text: app.get_translations('Change Address')
                        md_bg_color: 0.9, 0.5, 0.2, 1
                        size_hint_x: None
                        width: dp(630)
                        pos_hint: {'center_x': .5}
                        size_hint_y: None
                        height: dp(50)
                        on_release: root.show_address_dialog()

                    MDRaisedButton:
                        text: app.get_translations('Change Religion')
                        md_bg_color: 0.9, 0.5, 0.2, 1
                        size_hint_x: None
                        width: dp(630)
                        pos_hint: {'center_x': .5}
                        size_hint_y: None
                        height: dp(50)
                        on_release: root.manager.current = 'religion'

                    ToggleButton:
                        id: explore_mode_toggle
                        text: app.get_translations('Explore Mode: ') + ('ON' if root.explore_mode else 'OFF')
                        size_hint_x: None
                        width: dp(630)
                        pos_hint: {'center_x': .5}
                        size_hint_y: None
                        height: dp(50)
                        on_state: root.toggle_explore_mode(self.state)

                    MDRaisedButton:
                        text: app.get_translations('View Terms of Service')
                        md_bg_color: 0.9, 0.5, 0.2, 1
                        size_hint_x: None
                        width: dp(630)
                        pos_hint: {'center_x': .5}
                        size_hint_y: None
                        height: dp(50)
                        on_release: root.manager.current = 'terms'

                    MDRaisedButton:
                        text: app.get_translations('View Privacy Policy')
                        md_bg_color: 0.9, 0.5, 0.2, 1
                        size_hint_x: None
                        width: dp(630)
                        pos_hint: {'center_x': .5}
                        size_hint_y: None
                        height: dp(50)
                        on_release: root.manager.current = 'privacy'

                    # Rate Our App
                    Label:
                        text: app.get_translations('Rate Our App')
                        font_size: '18sp'
                        bold: True
                        size_hint_y: None
                        height: dp(30)
                        halign: 'center'

                    BoxLayout:
                        spacing: dp(10)
                        size_hint_y: None
                        height: dp(50)

                        Button:
                            text: '1'
                            on_release: root.rate_app(1)
                        Button:
                            text: '2'
                            on_release: root.rate_app(2)
                        Button:
                            text: '3'
                            on_release: root.rate_app(3)
                        Button:
                            text: '4'
                            on_release: root.rate_app(4)
                        Button:
                            text: '5'
                            on_release: root.rate_app(5)

                    # Feedback
                    Label:
                        text: app.get_translations('Feedback')
                        font_size: '18sp'
                        bold: True
                        size_hint_y: None
                        height: dp(30)
                        halign: 'center'

                    TextInput:
                        id: feedback_input
                        hint_text: app.get_translations('Describe any issues or suggestions...')
                        size_hint_x: None
                        width: dp(630)
                        pos_hint: {'center_x': .5}
                        size_hint_y: None
                        height: dp(100)
                        multiline: True

                    MDRaisedButton:
                        text: app.get_translations('Submit Feedback')
                        md_bg_color: 0.2, 0.6, 1, 1
                        size_hint_x: None
                        width: dp(630)
                        pos_hint: {'center_x': .5}
                        size_hint_y: None
                        height: dp(50)
                        on_release: root.submit_feedback()

        # ── Floating blue Back button on top ─────────────────────────────
        MDRaisedButton:
            text: app.get_translations('Back')
            md_bg_color: 0.2, 0.6, 1, 1
            size_hint: None, None
            size: dp(80), dp(30)
            pos_hint: {'x': .02, 'top': .98}
            on_release: root.go_back()
